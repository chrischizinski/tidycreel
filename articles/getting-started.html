<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with tidycreel • tidycreel</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started with tidycreel">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidycreel</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/effort_survey_first.html">Effort (Survey-First)</a></li>
    <li><a class="dropdown-item" href="../articles/aerial.html">Aerial Effort</a></li>
    <li><a class="dropdown-item" href="../articles/survey_creel_terms.html">Survey Terms → Creel Translator</a></li>
    <li><a class="dropdown-item" href="../articles/replicate_designs_creel.html">Replicate Designs for Creel</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/chrischizinski/tidycreel/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with tidycreel</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/chrischizinski/tidycreel/blob/main/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="d-none name"><code>getting-started.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chrischizinski/tidycreel" class="external-link">tidycreel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'lubridate'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     date, intersect, setdiff, union</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>tidycreel</code> package provides a survey-first framework
for creel surveys. Designs are lean containers; estimation uses
day-level survey designs (<code>svydesign</code>) built from the
sampling calendar with <code><a href="../reference/as_day_svydesign.html">as_day_svydesign()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="survey-design-types">Survey Design Types<a class="anchor" aria-label="anchor" href="#survey-design-types"></a>
</h2>
<p><code>tidycreel</code> supports three main data components:</p>
<ol style="list-style-type: decimal">
<li>Interviews (access-point or roving) and count tables
(instantaneous/progressive).</li>
<li>Sampling calendar (days, strata, target vs actual samples).</li>
<li>Estimators that operate with a day-PSU <code>svydesign</code> for
variance.</li>
</ol>
</div>
<div class="section level2">
<h2 id="loading-example-data">Loading Example Data<a class="anchor" aria-label="anchor" href="#loading-example-data"></a>
</h2>
<p>The package includes example datasets that we’ll use throughout this
vignette:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load example datasets</span></span>
<span><span class="va">interviews</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/toy_interviews.csv"</span>, package <span class="op">=</span> <span class="st">"tidycreel"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">26</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">17</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (6): interview_id, location, mode, shift_block, day_type, target_species</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (7): party_size, hours_fished, catch_total, catch_kept, catch_released,...</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">lgl</span>  (1): trip_complete</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">dttm</span> (2): time_start, time_end</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">date</span> (1): date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="va">counts</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/toy_counts.csv"</span>, package <span class="op">=</span> <span class="st">"tidycreel"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">24</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">16</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (8): count_id, location, mode, weather_code, visibility, count_category...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (6): anglers_count, parties_count, temperature, wind_speed, count_durat...</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">dttm</span> (1): time</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">date</span> (1): date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span><span class="va">calendar</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/toy_calendar.csv"</span>, package <span class="op">=</span> <span class="st">"tidycreel"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">18</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">11</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span>  (6): stratum_id, day_type, season, month, shift_block, location</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span>  (2): target_sample, actual_sample</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">lgl</span>  (2): weekend, holiday</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">date</span> (1): date</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span></span>
<span><span class="co"># Preview the data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">interviews</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 17</span></span></span>
<span><span class="co">#&gt;   interview_id date       time_start          time_end            location mode </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> INT001       2024-01-01 2024-01-01 <span style="color: #949494;">08:30:00</span> 2024-01-01 <span style="color: #949494;">08:45:00</span> Lake_A   boat </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> INT001B      2024-01-01 2024-01-01 <span style="color: #949494;">08:30:00</span> 2024-01-01 <span style="color: #949494;">08:45:00</span> Lake_B   boat </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> INT002       2024-01-01 2024-01-01 <span style="color: #949494;">09:15:00</span> 2024-01-01 <span style="color: #949494;">09:30:00</span> Lake_A   bank </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> INT002B      2024-01-01 2024-01-01 <span style="color: #949494;">09:15:00</span> 2024-01-01 <span style="color: #949494;">09:30:00</span> Lake_B   bank </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> INT003       2024-01-01 2024-01-01 <span style="color: #949494;">10:00:00</span> 2024-01-01 <span style="color: #949494;">10:20:00</span> Lake_A   boat </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> INT003B      2024-01-01 2024-01-01 <span style="color: #949494;">10:00:00</span> 2024-01-01 <span style="color: #949494;">10:20:00</span> Lake_B   boat </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more variables: shift_block &lt;chr&gt;, day_type &lt;chr&gt;, party_size &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   hours_fished &lt;dbl&gt;, target_species &lt;chr&gt;, catch_total &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   catch_kept &lt;dbl&gt;, catch_released &lt;dbl&gt;, weight_total &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   trip_complete &lt;lgl&gt;, effort_expansion &lt;dbl&gt;</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">counts</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 16</span></span></span>
<span><span class="co">#&gt;   count_id date       time                location mode  anglers_count</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> C001     2024-01-01 2024-01-01 <span style="color: #949494;">08:30:00</span> Lake_A   boat             10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> C002     2024-01-01 2024-01-01 <span style="color: #949494;">09:15:00</span> Lake_A   bank              8</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> C003     2024-01-01 2024-01-01 <span style="color: #949494;">14:30:00</span> Lake_A   boat              6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> C004     2024-01-01 2024-01-01 <span style="color: #949494;">15:20:00</span> Lake_A   bank              4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> C005     2024-01-02 2024-01-02 <span style="color: #949494;">07:45:00</span> Lake_A   boat             12</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> C006     2024-01-02 2024-01-02 <span style="color: #949494;">09:30:00</span> Lake_A   boat              9</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: parties_count &lt;dbl&gt;, weather_code &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   temperature &lt;dbl&gt;, wind_speed &lt;dbl&gt;, visibility &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   count_duration &lt;dbl&gt;, count_category &lt;chr&gt;, count_value &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   shift_block &lt;chr&gt;, day_type &lt;chr&gt;</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">calendar</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 11</span></span></span>
<span><span class="co">#&gt;   date       stratum_id        day_type season month weekend holiday shift_block</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   morning    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   morning    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   afternoon  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   afternoon  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   evening    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-01-01 2024-01-01-weekd… weekday  winter Janu… FALSE   FALSE   evening    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: location &lt;chr&gt;, target_sample &lt;dbl&gt;, actual_sample &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-an-access-point-survey-container">Creating an Access-Point Survey Container<a class="anchor" aria-label="anchor" href="#creating-an-access-point-survey-container"></a>
</h2>
<p>Access-point designs are used when interviews are conducted at fixed
locations where anglers exit the fishery. This constructor validates and
stores inputs for downstream estimation.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create access-point survey design</span></span>
<span><span class="va">access_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidycreel/man/design-constructors.html" class="external-link">design_access</a></span><span class="op">(</span></span>
<span>  interviews <span class="op">=</span> <span class="va">interviews</span>,</span>
<span>  calendar <span class="op">=</span> <span class="va">calendar</span>,</span>
<span>  strata_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"shift_block"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the design object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">access_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "access_design" "creel_design"  "list"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">access_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "design_type"    "interviews"     "calendar"       "locations"     </span></span>
<span><span class="co">#&gt; [5] "strata_vars"    "weight_method"  "design_weights" "svy_design"    </span></span>
<span><span class="co">#&gt; [9] "metadata"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-a-roving-survey-container">Creating a Roving Survey Container<a class="anchor" aria-label="anchor" href="#creating-a-roving-survey-container"></a>
</h2>
<p>Roving designs are used when interviewers move between locations to
conduct interviews. This constructor stores interview/count data and the
calendar for downstream estimation.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Minimal counts table matching the validation schema</span></span>
<span><span class="va">counts_rov</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  count_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"C001"</span>,<span class="st">"C002"</span>,<span class="st">"C003"</span><span class="op">)</span>,</span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2025-08-20"</span>,<span class="st">"2025-08-20"</span>,<span class="st">"2025-08-21"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2025-08-20 09:00:00"</span>,<span class="st">"2025-08-20 11:00:00"</span>,<span class="st">"2025-08-21 10:00:00"</span><span class="op">)</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>,</span>
<span>  location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"A"</span><span class="op">)</span>,</span>
<span>  mode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"boat"</span>,<span class="st">"bank"</span>,<span class="st">"boat"</span><span class="op">)</span>,</span>
<span>  anglers_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10L</span>, <span class="fl">12L</span>, <span class="fl">8L</span><span class="op">)</span>,</span>
<span>  parties_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5L</span>, <span class="fl">6L</span>, <span class="fl">4L</span><span class="op">)</span>,</span>
<span>  weather_code <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"clear"</span>,<span class="st">"clear"</span>,<span class="st">"overcast"</span><span class="op">)</span>,</span>
<span>  temperature <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">22</span>, <span class="fl">19</span><span class="op">)</span>,</span>
<span>  wind_speed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">6</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  visibility <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"good"</span>,<span class="st">"good"</span>,<span class="st">"fair"</span><span class="op">)</span>,</span>
<span>  count_duration <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60L</span>, <span class="fl">60L</span>, <span class="fl">60L</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create roving survey design</span></span>
<span><span class="va">roving_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidycreel/man/design-constructors.html" class="external-link">design_roving</a></span><span class="op">(</span></span>
<span>  interviews <span class="op">=</span> <span class="va">interviews</span>,</span>
<span>  counts <span class="op">=</span> <span class="va">counts_rov</span>,</span>
<span>  calendar <span class="op">=</span> <span class="va">calendar</span>,</span>
<span>  strata_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span>, <span class="st">"shift_block"</span>, <span class="st">"location"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Examine the design object</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">roving_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "roving_design" "creel_design"  "list"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">roving_design</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "design_type"         "interviews"          "counts"             </span></span>
<span><span class="co">#&gt;  [4] "calendar"            "locations"           "strata_vars"        </span></span>
<span><span class="co">#&gt;  [7] "effort_method"       "coverage_correction" "design_weights"     </span></span>
<span><span class="co">#&gt; [10] "effort_estimates"    "svy_design"          "metadata"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="day-psu-designs-and-replicate-variance">Day-PSU Designs and Replicate Variance<a class="anchor" aria-label="anchor" href="#day-psu-designs-and-replicate-variance"></a>
</h2>
<p>Build a day-level survey design from the calendar and (optionally)
convert to a replicate-weight design for robust SEs.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">svy_day</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/as_day_svydesign.html">as_day_svydesign</a></span><span class="op">(</span><span class="va">calendar</span>, day_id <span class="op">=</span> <span class="st">"date"</span>, strata_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"day_type"</span>, <span class="st">"month"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Bootstrap replicate design with 50 reps (keep small in examples)</span></span>
<span><span class="va">svy_rep</span> <span class="op">&lt;-</span> <span class="fu">survey</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/survey/man/as.svrepdesign.html" class="external-link">as.svrepdesign</a></span><span class="op">(</span><span class="va">svy_day</span>, type <span class="op">=</span> <span class="st">"bootstrap"</span>, replicates <span class="op">=</span> <span class="fl">50</span>, mse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">svy_rep</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "svyrep.design"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/weights.html" class="external-link">weights</a></span><span class="op">(</span><span class="va">svy_day</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt;   1.027   1.027   1.064   1.052   1.064   1.064</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="estimating-effort-survey-first">Estimating Effort (Survey-First)<a class="anchor" aria-label="anchor" href="#estimating-effort-survey-first"></a>
</h2>
<p>Once you have a day-PSU design, estimate effort from counts using the
survey-first estimators.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example instantaneous counts (toy)</span></span>
<span><span class="va">counts_inst</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024-01-01"</span>,<span class="st">"2024-01-01"</span>,<span class="st">"2024-01-02"</span>,<span class="st">"2024-01-02"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>,<span class="st">"B"</span>,<span class="st">"A"</span>,<span class="st">"B"</span><span class="op">)</span>,</span>
<span>  count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">12</span>,<span class="fl">8</span>,<span class="fl">15</span><span class="op">)</span>,</span>
<span>  interval_minutes <span class="op">=</span> <span class="fl">60</span>,</span>
<span>  total_day_minutes <span class="op">=</span> <span class="fl">600</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/est_effort.html">est_effort</a></span><span class="op">(</span></span>
<span>  design <span class="op">=</span> <span class="va">svy_day</span>,</span>
<span>  counts <span class="op">=</span> <span class="va">counts_inst</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"instantaneous"</span>,</span>
<span>  by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 8</span></span></span>
<span><span class="co">#&gt;   location estimate    se ci_low ci_high     n method        diagnostics</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> A            191.    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> instantaneous <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> B            287.    <span style="color: #BB0000;">NA</span>     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span> instantaneous <span style="color: #949494;">&lt;NULL&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="estimating-cpue-and-catch-survey-first">Estimating CPUE and Catch (Survey-First)<a class="anchor" aria-label="anchor" href="#estimating-cpue-and-catch-survey-first"></a>
</h2>
<p>CPUE is estimated design-based from interview data. Prefer the
ratio-of-means form for incomplete trips; use mean-of-ratios for
complete trips.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Access container; CPUE/Catch accept a svydesign/svrepdesign or a creel_design.</span></span>
<span><span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidycreel/man/design-constructors.html" class="external-link">design_access</a></span><span class="op">(</span>interviews <span class="op">=</span> <span class="va">interviews</span>, calendar <span class="op">=</span> <span class="va">calendar</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># CPUE by species (ratio-of-means)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">cpue_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/est_cpue.html">est_cpue</a></span><span class="op">(</span><span class="va">design</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"target_species"</span><span class="op">)</span>, response <span class="op">=</span> <span class="st">"catch_total"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Auto mode: Detected 100% complete trips (n=26).</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Using mean-of-ratios estimator (appropriate for complete trips).</span></span>
<span><span class="va">cpue_species</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   target_species estimate    se ci_low ci_high     n method          diagnostics</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> bass               1.16 0.100  0.960    1.35    10 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> catfish            1    0      1        1        4 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> panfish            1.83 0.392  1.07     2.60     4 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> walleye            1.77 0.176  1.43     2.12     8 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span></span></span>
<span></span>
<span><span class="co"># CPUE (mean-of-ratios) — for complete trips</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">cpue_mor</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/est_cpue.html">est_cpue</a></span><span class="op">(</span><span class="va">design</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"target_species"</span><span class="op">)</span>, response <span class="op">=</span> <span class="st">"catch_total"</span>, mode <span class="op">=</span> <span class="st">"mean_of_ratios"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">cpue_mor</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   target_species estimate    se ci_low ci_high     n method          diagnostics</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> bass               1.16 0.100  0.960    1.35    10 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> catfish            1    0      1        1        4 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> panfish            1.83 0.392  1.07     2.60     4 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> walleye            1.77 0.176  1.43     2.12     8 cpue_mean_of_r… <span style="color: #949494;">&lt;NULL&gt;</span></span></span>
<span></span>
<span><span class="co"># Harvest totals by species</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/warning.html" class="external-link">suppressWarnings</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">harvest_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/est_catch.html">est_catch</a></span><span class="op">(</span><span class="va">design</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"target_species"</span><span class="op">)</span>, response <span class="op">=</span> <span class="st">"catch_kept"</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">harvest_species</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 8</span></span></span>
<span><span class="co">#&gt;   target_species estimate    se ci_low ci_high     n method          diagnostics</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> bass                 22  6.26  9.73     34.3    10 catch_total:ca… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> catfish               6  2.98  0.162    11.8     4 catch_total:ca… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> panfish              10  5.55 -<span style="color: #BB0000;">0.878</span>    20.9     4 catch_total:ca… <span style="color: #949494;">&lt;NULL&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> walleye              44 14.8  15.0      73.0     8 catch_total:ca… <span style="color: #949494;">&lt;NULL&gt;</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="advanced-usage">Advanced Usage<a class="anchor" aria-label="anchor" href="#advanced-usage"></a>
</h2>
<div class="section level3">
<h3 id="custom-stratification">Custom Stratification<a class="anchor" aria-label="anchor" href="#custom-stratification"></a>
</h3>
<p>You can specify custom stratification variables based on your survey
design:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Diagnostics: check structure before design creation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">calendar</span><span class="op">)</span></span>
<span><span class="co">#&gt; spc_tbl_ [18 × 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ date         : Date[1:18], format: "2024-01-01" "2024-01-01" ...</span></span>
<span><span class="co">#&gt;  $ stratum_id   : chr [1:18] "2024-01-01-weekday-morning" "2024-01-01-weekday-morning" "2024-01-01-weekday-afternoon" "2024-01-01-weekday-afternoon" ...</span></span>
<span><span class="co">#&gt;  $ day_type     : chr [1:18] "weekday" "weekday" "weekday" "weekday" ...</span></span>
<span><span class="co">#&gt;  $ season       : chr [1:18] "winter" "winter" "winter" "winter" ...</span></span>
<span><span class="co">#&gt;  $ month        : chr [1:18] "January" "January" "January" "January" ...</span></span>
<span><span class="co">#&gt;  $ weekend      : logi [1:18] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;  $ holiday      : logi [1:18] FALSE FALSE FALSE FALSE FALSE FALSE ...</span></span>
<span><span class="co">#&gt;  $ shift_block  : chr [1:18] "morning" "morning" "afternoon" "afternoon" ...</span></span>
<span><span class="co">#&gt;  $ location     : chr [1:18] "Lake_A" "Lake_B" "Lake_A" "Lake_B" ...</span></span>
<span><span class="co">#&gt;  $ target_sample: num [1:18] 10 10 10 10 5 5 10 10 10 10 ...</span></span>
<span><span class="co">#&gt;  $ actual_sample: num [1:18] 8 8 12 12 3 3 10 10 9 9 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "spec")=</span></span>
<span><span class="co">#&gt;   .. cols(</span></span>
<span><span class="co">#&gt;   ..   date = <span style="color: #0000BB;">col_date(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   stratum_id = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   day_type = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   season = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   month = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   weekend = <span style="color: #BBBB00;">col_logical()</span>,</span></span>
<span><span class="co">#&gt;   ..   holiday = <span style="color: #BBBB00;">col_logical()</span>,</span></span>
<span><span class="co">#&gt;   ..   shift_block = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   location = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   target_sample = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   actual_sample = <span style="color: #00BB00;">col_double()</span></span></span>
<span><span class="co">#&gt;   .. )</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">interviews</span><span class="op">)</span></span>
<span><span class="co">#&gt; spc_tbl_ [26 × 17] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ interview_id    : chr [1:26] "INT001" "INT001B" "INT002" "INT002B" ...</span></span>
<span><span class="co">#&gt;  $ date            : Date[1:26], format: "2024-01-01" "2024-01-01" ...</span></span>
<span><span class="co">#&gt;  $ time_start      : POSIXct[1:26], format: "2024-01-01 08:30:00" "2024-01-01 08:30:00" ...</span></span>
<span><span class="co">#&gt;  $ time_end        : POSIXct[1:26], format: "2024-01-01 08:45:00" "2024-01-01 08:45:00" ...</span></span>
<span><span class="co">#&gt;  $ location        : chr [1:26] "Lake_A" "Lake_B" "Lake_A" "Lake_B" ...</span></span>
<span><span class="co">#&gt;  $ mode            : chr [1:26] "boat" "boat" "bank" "bank" ...</span></span>
<span><span class="co">#&gt;  $ shift_block     : chr [1:26] "morning" "morning" "morning" "morning" ...</span></span>
<span><span class="co">#&gt;  $ day_type        : chr [1:26] "weekday" "weekday" "weekday" "weekday" ...</span></span>
<span><span class="co">#&gt;  $ party_size      : num [1:26] 2 2 1 1 3 3 2 2 1 1 ...</span></span>
<span><span class="co">#&gt;  $ hours_fished    : num [1:26] 4.5 4.5 3 3 6 6 2.5 2.5 1.5 1.5 ...</span></span>
<span><span class="co">#&gt;  $ target_species  : chr [1:26] "walleye" "walleye" "bass" "bass" ...</span></span>
<span><span class="co">#&gt;  $ catch_total     : num [1:26] 5 5 2 2 8 8 3 3 4 4 ...</span></span>
<span><span class="co">#&gt;  $ catch_kept      : num [1:26] 3 3 1 1 5 5 2 2 4 4 ...</span></span>
<span><span class="co">#&gt;  $ catch_released  : num [1:26] 2 2 1 1 3 3 1 1 0 0 ...</span></span>
<span><span class="co">#&gt;  $ weight_total    : num [1:26] 2.5 2.5 1.2 1.2 4.1 4.1 1.8 1.8 0.8 0.8 ...</span></span>
<span><span class="co">#&gt;  $ trip_complete   : logi [1:26] TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#&gt;  $ effort_expansion: num [1:26] 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "spec")=</span></span>
<span><span class="co">#&gt;   .. cols(</span></span>
<span><span class="co">#&gt;   ..   interview_id = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   date = <span style="color: #0000BB;">col_date(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   time_start = <span style="color: #0000BB;">col_datetime(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   time_end = <span style="color: #0000BB;">col_datetime(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   location = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   mode = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   shift_block = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   day_type = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   party_size = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   hours_fished = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   target_species = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_total = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_kept = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_released = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   weight_total = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   trip_complete = <span style="color: #BBBB00;">col_logical()</span>,</span></span>
<span><span class="co">#&gt;   ..   effort_expansion = <span style="color: #00BB00;">col_double()</span></span></span>
<span><span class="co">#&gt;   .. )</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</span></span>
<span><span class="co"># Create design with custom stratification</span></span>
<span><span class="va">custom_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/tidycreel/man/design-constructors.html" class="external-link">design_access</a></span><span class="op">(</span></span>
<span>  interviews <span class="op">=</span> <span class="va">interviews</span>,</span>
<span>  calendar <span class="op">=</span> <span class="va">calendar</span>,</span>
<span>  strata_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"date"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check stratification</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">custom_design</span><span class="op">$</span><span class="va">interviews</span><span class="op">)</span></span>
<span><span class="co">#&gt; spc_tbl_ [26 × 17] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ interview_id    : chr [1:26] "INT001" "INT001B" "INT002" "INT002B" ...</span></span>
<span><span class="co">#&gt;  $ date            : Date[1:26], format: "2024-01-01" "2024-01-01" ...</span></span>
<span><span class="co">#&gt;  $ time_start      : POSIXct[1:26], format: "2024-01-01 08:30:00" "2024-01-01 08:30:00" ...</span></span>
<span><span class="co">#&gt;  $ time_end        : POSIXct[1:26], format: "2024-01-01 08:45:00" "2024-01-01 08:45:00" ...</span></span>
<span><span class="co">#&gt;  $ location        : chr [1:26] "Lake_A" "Lake_B" "Lake_A" "Lake_B" ...</span></span>
<span><span class="co">#&gt;  $ mode            : chr [1:26] "boat" "boat" "bank" "bank" ...</span></span>
<span><span class="co">#&gt;  $ shift_block     : chr [1:26] "morning" "morning" "morning" "morning" ...</span></span>
<span><span class="co">#&gt;  $ day_type        : chr [1:26] "weekday" "weekday" "weekday" "weekday" ...</span></span>
<span><span class="co">#&gt;  $ party_size      : num [1:26] 2 2 1 1 3 3 2 2 1 1 ...</span></span>
<span><span class="co">#&gt;  $ hours_fished    : num [1:26] 4.5 4.5 3 3 6 6 2.5 2.5 1.5 1.5 ...</span></span>
<span><span class="co">#&gt;  $ target_species  : chr [1:26] "walleye" "walleye" "bass" "bass" ...</span></span>
<span><span class="co">#&gt;  $ catch_total     : num [1:26] 5 5 2 2 8 8 3 3 4 4 ...</span></span>
<span><span class="co">#&gt;  $ catch_kept      : num [1:26] 3 3 1 1 5 5 2 2 4 4 ...</span></span>
<span><span class="co">#&gt;  $ catch_released  : num [1:26] 2 2 1 1 3 3 1 1 0 0 ...</span></span>
<span><span class="co">#&gt;  $ weight_total    : num [1:26] 2.5 2.5 1.2 1.2 4.1 4.1 1.8 1.8 0.8 0.8 ...</span></span>
<span><span class="co">#&gt;  $ trip_complete   : logi [1:26] TRUE TRUE TRUE TRUE TRUE TRUE ...</span></span>
<span><span class="co">#&gt;  $ effort_expansion: num [1:26] 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  - attr(*, "spec")=</span></span>
<span><span class="co">#&gt;   .. cols(</span></span>
<span><span class="co">#&gt;   ..   interview_id = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   date = <span style="color: #0000BB;">col_date(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   time_start = <span style="color: #0000BB;">col_datetime(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   time_end = <span style="color: #0000BB;">col_datetime(format = "")</span>,</span></span>
<span><span class="co">#&gt;   ..   location = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   mode = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   shift_block = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   day_type = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   party_size = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   hours_fished = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   target_species = <span style="color: #BB0000;">col_character()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_total = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_kept = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   catch_released = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   weight_total = <span style="color: #00BB00;">col_double()</span>,</span></span>
<span><span class="co">#&gt;   ..   trip_complete = <span style="color: #BBBB00;">col_logical()</span>,</span></span>
<span><span class="co">#&gt;   ..   effort_expansion = <span style="color: #00BB00;">col_double()</span></span></span>
<span><span class="co">#&gt;   .. )</span></span>
<span><span class="co">#&gt;  - attr(*, "problems")=&lt;externalptr&gt;</span></span>
<span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">custom_design</span><span class="op">$</span><span class="va">interviews</span>, <span class="va">date</span>, <span class="va">shift_block</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 3</span></span></span>
<span><span class="co">#&gt;   date       shift_block     n</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 2024-01-01 afternoon       4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 2024-01-01 evening         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 2024-01-01 morning         6</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 2024-01-02 afternoon       2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 2024-01-02 evening         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 2024-01-02 morning         4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> 2024-01-06 afternoon       2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> 2024-01-06 evening         2</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> 2024-01-06 morning         2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="handling-missing-data">Handling Missing Data<a class="anchor" aria-label="anchor" href="#handling-missing-data"></a>
</h3>
<p>The validation functions will catch missing required columns:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This will produce an error due to missing columns</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="op">{</span></span>
<span>  <span class="va">bad_interviews</span> <span class="op">&lt;-</span> <span class="va">interviews</span><span class="op">[</span>, <span class="op">-</span><span class="fl">1</span><span class="op">]</span>  <span class="co"># Remove first column</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidycreel/man/design-constructors.html" class="external-link">design_access</a></span><span class="op">(</span><span class="va">bad_interviews</span>, <span class="va">calendar</span><span class="op">)</span></span>
<span><span class="op">}</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Validation error: "</span>, <span class="va">e</span><span class="op">$</span><span class="va">message</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co">#&gt; Validation error: Missing required columns: interview_id</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<p>Now that you have lean survey containers and a day-PSU design, you
can:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Estimate effort and CPUE</strong> with survey-first
estimators and <code>svydesign</code>
</li>
<li>
<strong>Calculate population totals</strong> with appropriate
variance estimates</li>
<li>
<strong>Perform hypothesis tests</strong> comparing different groups
or time periods</li>
<li>
<strong>Generate reports</strong> with confidence intervals and
uncertainty bounds</li>
</ol>
<p>See the package documentation for more advanced features and
estimation functions.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Pollock, K. H., Jones, C. M., &amp; Brown, T. L. (1994). <em>Angler
survey methods and their applications in fisheries management</em>.
American Fisheries Society.</li>
<li>Malvestuto, S. P. (1996). <em>Sampling the recreational creel</em>.
In Murphy, B. R. &amp; Willis, D. W. (Eds.), <em>Fisheries
techniques</em> (2nd ed., pp. 591-623). American Fisheries Society.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher Chizinski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
