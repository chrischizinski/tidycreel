% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qa-check-species.R
\name{qa_check_species}
\alias{qa_check_species}
\title{Check for Species Identification Issues}
\usage{
qa_check_species(
  interviews,
  species_col = "species",
  location_col = NULL,
  date_col = "date",
  catch_col = "catch_total",
  reference_species = NULL,
  rare_species_threshold = 0.01,
  seasonal_check = TRUE,
  location_check = TRUE,
  min_records_per_species = 3
)
}
\arguments{
\item{interviews}{Interview data containing species information}

\item{species_col}{Column containing species names or codes}

\item{location_col}{Column containing location/waterbody information}

\item{date_col}{Column containing date information}

\item{catch_col}{Column containing catch counts (for validation)}

\item{reference_species}{Character vector of expected species for the waterbody.
If NULL, uses all species found in data.}

\item{rare_species_threshold}{Proportion threshold below which species are
considered rare and flagged for review (default 0.01 = 1\%)}

\item{seasonal_check}{Logical, whether to check for seasonally unlikely
species (requires date information). Default TRUE.}

\item{location_check}{Logical, whether to check for location-inappropriate
species. Default TRUE.}

\item{min_records_per_species}{Minimum number of records required for a
species to be considered established (default 3)}
}
\value{
List with:
\describe{
\item{issue_detected}{Logical, TRUE if species issues detected}
\item{severity}{"high", "medium", "low", or "none"}
\item{n_total}{Total number of interviews}
\item{n_species_total}{Total number of unique species}
\item{n_rare_species}{Number of rare species (below threshold)}
\item{n_singleton_species}{Number of species with only 1 record}
\item{n_unlikely_combinations}{Number of unlikely species combinations}
\item{n_seasonal_outliers}{Number of seasonally unlikely records}
\item{n_location_outliers}{Number of location-inappropriate species}
\item{rare_species_records}{Sample records with rare species}
\item{singleton_species}{List of species with only 1 record}
\item{unlikely_combinations}{Sample records with unlikely combinations}
\item{seasonal_outliers}{Sample seasonally inappropriate records}
\item{location_outliers}{Sample location-inappropriate records}
\item{species_summary}{Summary statistics by species}
\item{recommendation}{Text guidance for remediation}
}
}
\description{
Detects potential species identification errors and unlikely species
combinations that may indicate data entry mistakes or misidentification
(Table 17.3, #7).
}
\details{
\subsection{Detection Logic}{
\enumerate{
\item \strong{Rare Species Detection:}
\itemize{
\item Identify species below frequency threshold
\item Flag singleton species (only 1 record)
\item Check for typos in species names
}
\item \strong{Unlikely Combinations:}
\itemize{
\item Saltwater species in freshwater locations
\item Cold-water species in warm-water periods
\item Predator-prey species caught together unusually often
}
\item \strong{Seasonal Appropriateness:}
\itemize{
\item Ice fishing species in summer
\item Spawning season species outside spawning periods
\item Migration timing inconsistencies
}
\item \strong{Location Appropriateness:}
\itemize{
\item Species outside known range
\item Habitat-specific species in wrong habitat types
\item Elevation or climate mismatches
}
\item \strong{Data Quality Indicators:}
\itemize{
\item Inconsistent species naming conventions
\item Missing species information
\item Catch records without species identification
}
}
}

\subsection{Common Issues Detected}{
\itemize{
\item \strong{Typos}: "Walleye" vs "Waleye", "Bass" vs "Base"
\item \strong{Code Errors}: Numeric codes entered incorrectly
\item \strong{Habitat Mismatches}: Trout in warm-water lakes
\item \strong{Seasonal Errors}: Ice fishing species in July
\item \strong{Range Extensions}: Species outside known distribution
\item \strong{Identification Errors}: Similar-looking species confused
}
}
}
\examples{
\dontrun{
# Basic species validation
species_check <- qa_check_species(
  interviews,
  species_col = "species",
  location_col = "waterbody"
)

# With reference species list
expected_species <- c("Walleye", "Northern Pike", "Yellow Perch", "Bluegill")
species_check <- qa_check_species(
  interviews,
  species_col = "species",
  reference_species = expected_species
)

# Comprehensive check with seasonal validation
species_check <- qa_check_species(
  interviews,
  species_col = "species",
  location_col = "lake",
  date_col = "date",
  seasonal_check = TRUE,
  location_check = TRUE
)
}

}
\seealso{
\code{\link{qa_checks}}
}
