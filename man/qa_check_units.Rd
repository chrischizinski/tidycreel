% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/qa-check-units.R
\name{qa_check_units}
\alias{qa_check_units}
\title{Check for Mixed or Inconsistent Measurement Units}
\usage{
qa_check_units(
  interviews,
  length_col = "length_mm",
  weight_col = NULL,
  species_col = NULL,
  interviewer_col = NULL,
  mm_range = c(50, 1000),
  inch_range = c(2, 50)
)
}
\arguments{
\item{interviews}{Interview data with measurements}

\item{length_col}{Column containing fish lengths (default "length_mm")}

\item{weight_col}{Column containing fish weights (optional)}

\item{species_col}{Column for species-specific checks (optional)}

\item{interviewer_col}{Column containing interviewer IDs (optional).
Used to detect interviewer-specific unit preferences.}

\item{mm_range}{Numeric vector of length 2 specifying expected range for
mm measurements (default c(50, 1000)). Values outside this suggest inches.}

\item{inch_range}{Numeric vector of length 2 specifying expected range for
inch measurements (default c(2, 50)). Values in this range with low variance
suggest inches.}
}
\value{
List with:
\describe{
\item{issue_detected}{Logical, TRUE if unit issues detected}
\item{severity}{"high", "medium", "low", or "none"}
\item{likely_units}{Detected measurement system: "mm", "inches", or "mixed"}
\item{n_measurements}{Total number of length measurements}
\item{n_likely_mm}{Number of measurements likely in mm}
\item{n_likely_inches}{Number of measurements likely in inches}
\item{precision_stats}{Summary of measurement precision (decimal places)}
\item{mixed_unit_samples}{Sample of records with suspected wrong units}
\item{interviewer_units}{Unit patterns by interviewer (if interviewer_col provided)}
\item{suspicious_interviewers}{Interviewers using different units than majority}
\item{species_unit_patterns}{Unit patterns by species (if species_col provided)}
\item{recommendation}{Text guidance for remediation}
}
}
\description{
Detects mixing of measurement units (inches vs mm) or precision levels,
which creates variability and unknown bias (Table 17.3, #6).
}
\details{
\subsection{Detection Logic}{
\enumerate{
\item \strong{Unit Detection:}
\itemize{
\item Examine length value distributions
\item Detect likely inch measurements (values 2-50 with low variance)
\item Detect likely mm measurements (values 50-1000)
\item Flag if both present in same dataset
}
\item \strong{Precision Detection:}
\itemize{
\item Check for inconsistent precision (mix of 10mm, 1mm, 0.1mm)
\item Count decimal places to infer measurement precision
\item Recommend standardized precision levels
}
\item \strong{Species-Specific:}
\itemize{
\item Flag suspicious length-species combinations (if species_col provided)
\item E.g., 500mm for a species typically 12" (likely wrong units)
}
\item \strong{Interviewer Patterns:}
\itemize{
\item Check if different interviewers use different units
\item Flag interviewer-specific unit preferences
}
}
}

\subsection{Severity Levels}{
\itemize{
\item \strong{High:} Clear evidence of mixed units (>20\% in wrong units)
\item \strong{Medium:} Moderate mixing (5-20\% in wrong units) or inconsistent precision
\item \strong{Low:} Suspicious patterns (<5\% in wrong units)
\item \strong{None:} Consistent units and precision
}
}
}
\examples{
\dontrun{
library(tidycreel)

# Basic check
qa_result <- qa_check_units(
  interviews,
  length_col = "length_mm"
)

# With interviewer analysis
qa_result <- qa_check_units(
  interviews,
  length_col = "length_mm",
  interviewer_col = "clerk_id",
  species_col = "species"
)

if (qa_result$issue_detected) {
  print(qa_result$likely_units)
  print(qa_result$recommendation)
}
}

}
\references{
\emph{Analysis and Interpretation of Freshwater Fisheries Data, 2nd Edition.}
Chapter 17: Creel Surveys, Table 17.3.
}
