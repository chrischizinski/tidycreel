% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est-effort-aerial.R
\name{est_effort.aerial}
\alias{est_effort.aerial}
\title{Aerial Effort Estimator}
\usage{
est_effort.aerial(
  counts,
  by = c("date", "location"),
  minutes_col = c("flight_minutes", "interval_minutes", "count_duration"),
  total_minutes_col = c("total_minutes", "total_day_minutes", "block_total_minutes"),
  day_id = "date",
  covariates = NULL,
  visibility_col = NULL,
  calibration_col = NULL,
  svy = NULL,
  post_strata_var = NULL,
  post_strata = NULL,
  calibrate_formula = NULL,
  calibrate_population = NULL,
  calfun = c("linear", "raking", "logit"),
  conf_level = 0.95
)
}
\arguments{
\item{counts}{Data frame/tibble of aerial counts with at least \code{count} and a
minutes column (e.g., \code{flight_minutes}, \code{interval_minutes}, or \code{count_duration}).}

\item{by}{Character vector of grouping variables present in \code{counts}
(e.g., \code{date}, \code{location}). Missing columns are ignored with a warning.}

\item{minutes_col}{Candidate column names for minutes represented by each
count. The first present is used.}

\item{total_minutes_col}{Optional column giving the total minutes represented
for the whole day×group (e.g., full day length or block coverage). If
absent, the estimator falls back to the sum of per-count minutes within the
day×group (warns).}

\item{day_id}{Day identifier (PSU), typically \code{date}, used to join to the
survey design.}

\item{covariates}{Optional character vector of additional grouping variables
for aerial conditions (e.g., \code{cloud}, \code{glare}, \code{observer}, \code{altitude}).}

\item{visibility_col}{Optional name of a column with visibility proportion
(0–1). Counts are divided by this value (guarded to avoid division by very
small numbers).}

\item{calibration_col}{Optional name of a column with multiplicative
calibration factors to apply after visibility correction.}

\item{svy}{Optional \code{svydesign}/\code{svrepdesign} encoding the day sampling
design (must include \code{day_id} in \code{svy$variables}). When provided, totals,
SEs, and CIs are computed with \code{survey} functions.}

\item{conf_level}{Confidence level for Wald CIs (default 0.95).}
}
\value{
Tibble with grouping columns, \code{estimate}, \code{se}, \code{ci_low}, \code{ci_high},
\code{n}, \code{method}, and a \code{diagnostics} list-column.
}
\description{
Estimate angler-hours from aerial snapshot counts using a mean-count
expansion within groups, with optional visibility and calibration
adjustments, and design-based variance via the \code{survey} package when a
day-level \code{svydesign} is provided.
}
\details{
Effort per day×group = mean(adjusted_count) × total_minutes_represented ÷ 60.
Group totals are then computed with \code{survey::svytotal}/\code{svyby} when \code{svy}
encodes the day sampling design.
}
\examples{
df <- tibble::tibble(
  date = as.Date(rep("2025-08-20", 4)),
  location = c("A","A","B","B"),
  count = c(10, 12, 8, 15),
  interval_minutes = c(60, 60, 60, 60)
)
est_effort.aerial(df)
}
