% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est-cpue.R
\name{est_cpue}
\alias{est_cpue}
\title{CPUE Estimator (REBUILT with Native Survey Integration)}
\usage{
est_cpue(
  design,
  by = NULL,
  response = c("catch_total", "catch_kept", "weight_total"),
  effort_col = "hours_fished",
  mode = c("auto", "ratio_of_means", "mean_of_ratios"),
  min_trip_hours = 0.5,
  conf_level = 0.95,
  variance_method = "survey",
  decompose_variance = FALSE,
  design_diagnostics = FALSE,
  n_replicates = 1000
)
}
\arguments{
\item{design}{A \code{svydesign}/\code{svrepdesign} built on interview data, or a
\code{creel_design} containing \code{interviews}. If a \code{creel_design} is supplied,
a minimal equal-weight design is constructed (warns).}

\item{by}{Character vector of grouping variables present in the interview
data (e.g., \code{c("target_species","location")}). Missing columns are
ignored with a warning.}

\item{response}{One of \code{"catch_total"}, \code{"catch_kept"}, or \code{"weight_total"}.
Determines the CPUE numerator.}

\item{effort_col}{Interview effort column for the denominator (default
\code{"hours_fished"}).}

\item{mode}{Estimation mode: \code{"auto"} (default), \code{"ratio_of_means"}, or
\code{"mean_of_ratios"}.}

\item{min_trip_hours}{Minimum trip duration for incomplete trips (default 0.5).}

\item{conf_level}{Confidence level for Wald CIs (default 0.95).}

\item{variance_method}{\strong{NEW} Variance estimation method (default "survey")}

\item{decompose_variance}{\strong{NEW} Logical, decompose variance (default FALSE)}

\item{design_diagnostics}{\strong{NEW} Logical, compute diagnostics (default FALSE)}

\item{n_replicates}{\strong{NEW} Bootstrap/jackknife replicates (default 1000)}
}
\value{
Tibble with grouping columns, \code{estimate}, \code{se}, \code{ci_low}, \code{ci_high},
\code{deff} (design effect), \code{n}, \code{method}, \code{diagnostics} list-column, and
\code{variance_info} list-column.
}
\description{
Design-based estimation of catch per unit effort (CPUE) using the
\code{survey} package with NATIVE support for advanced variance methods.
}
\details{
\strong{NEW}: Native support for multiple variance methods, variance decomposition,
and design diagnostics without requiring wrapper functions.
\itemize{
\item \strong{Auto mode}: Examines \code{trip_complete} field to determine appropriate estimator.
\item \strong{Ratio-of-means}: Robust for incomplete trips
\item \strong{Mean-of-ratios}: Preferred for complete trips
\item \strong{For roving surveys}: Use \code{\link[=est_cpue_roving]{est_cpue_roving()}} for Pollock correction
}
}
\examples{
\dontrun{
# BACKWARD COMPATIBLE
result <- est_cpue(design, response = "catch_kept")

# NEW: Advanced features
result <- est_cpue(
  design,
  response = "catch_kept",
  variance_method = "bootstrap",
  decompose_variance = TRUE,
  design_diagnostics = TRUE
)
}

}
\seealso{
\code{\link[=est_cpue_roving]{est_cpue_roving()}}, \code{\link[survey:svyratio]{survey::svyratio()}}, \code{\link[survey:surveysummary]{survey::svymean()}}
}
