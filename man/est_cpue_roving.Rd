% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est-cpue-roving.R
\name{est_cpue_roving}
\alias{est_cpue_roving}
\title{Estimate CPUE for Roving Creel Surveys (Pollock et al. 1997)}
\usage{
est_cpue_roving(
  design,
  by = NULL,
  response = c("catch_total", "catch_kept", "catch_released"),
  effort_col = "hours_fished",
  min_trip_hours = 0.5,
  length_bias_correction = c("none", "pollock"),
  total_trip_effort_col = NULL,
  conf_level = 0.95,
  diagnostics = TRUE
)
}
\arguments{
\item{design}{A \code{svydesign}/\code{svrepdesign} built on interview data with
incomplete trips (roving surveys).}

\item{by}{Character vector of grouping variables (e.g., \code{c("location", "species")}).}

\item{response}{One of \code{"catch_total"}, \code{"catch_kept"}, \code{"catch_released"}.}

\item{effort_col}{Interview effort column (default \code{"hours_fished"}).
For incomplete trips, this is \strong{observed effort at time of interview}.}

\item{min_trip_hours}{Minimum trip duration for inclusion. Trips shorter
than this threshold are excluded to avoid unstable ratios. Default 0.5
hours (Hoenig et al. 1997 recommendation).}

\item{length_bias_correction}{Apply length-biased sampling correction
(Pollock et al. 1997). Options:
\itemize{
\item \code{"none"}: No correction (assumes complete trips or no length bias)
\item \code{"pollock"}: Pollock et al. (1997) correction (recommended for roving)
}}

\item{total_trip_effort_col}{Column containing \strong{total planned trip effort}
(only needed if \code{length_bias_correction = "pollock"}). For incomplete trips,
this is the angler's stated total planned fishing time.}

\item{conf_level}{Confidence level for confidence intervals (default 0.95).}

\item{diagnostics}{Include diagnostic information in output (default \code{TRUE}).}
}
\value{
Tibble with standard tidycreel schema:
\itemize{
\item Grouping columns (from \code{by} parameter)
\item \code{estimate}: CPUE estimate (catch per unit effort)
\item \code{se}: Standard error
\item \code{ci_low}, \code{ci_high}: Confidence interval bounds
\item \code{n}: Sample size (after truncation)
\item \code{method}: Method identifier
\item \code{diagnostics}: List-column with diagnostic information
}
}
\description{
Design-based CPUE estimation for roving (incomplete trip) interviews with
length-biased sampling correction. Uses Pollock et al. (1997) methods
specifically designed for roving surveys where anglers are intercepted
during their fishing trips.
}
\details{
\subsection{Statistical Method}{

Roving surveys interview anglers \strong{during their trips}, creating two issues:
\enumerate{
\item \strong{Incomplete catch data} - Trip not yet finished
\item \strong{Length-biased sampling} - Longer trips more likely intercepted
}
\subsection{Mean-of-Ratios Estimator (Pollock et al. 1997)}{

For each interview \eqn{i}, calculate individual catch rate:
\deqn{r_i = \frac{c_i}{e_i}}

where:
\itemize{
\item \eqn{c_i} = catch at time of interview
\item \eqn{e_i} = effort at time of interview
}

Mean catch rate:
\deqn{\bar{r} = \frac{1}{n} \sum_{i=1}^n r_i}

Variance (mean-of-ratios):
\deqn{Var(\bar{r}) = \frac{1}{n(n-1)} \sum_{i=1}^n (r_i - \bar{r})^2}
}

\subsection{Length-Biased Sampling Correction}{

When \code{length_bias_correction = "pollock"}:

Correction factor for each observation:
\deqn{w_i = \frac{1}{T_i}}

where \eqn{T_i} is total planned trip duration.

Corrected estimator:
\deqn{\bar{r}_{corrected} = \frac{\sum_{i=1}^n w_i r_i}{\sum_{i=1}^n w_i}}
}

}

\subsection{When to Use This Function}{

\strong{Use \code{est_cpue_roving()} when:}
\itemize{
\item Conducting roving (on-water, circuit) surveys
\item Interviewing anglers \strong{during their trips} (incomplete)
\item Trip completion times unknown at interview
\item Need length-bias correction for accurate estimates
}

\strong{Use \code{est_cpue()} instead when:}
\itemize{
\item Access-point interviews with \strong{completed trips}
\item Trip duration and catch fully observed
\item No length-biased sampling concerns
}
}
}
\examples{
\dontrun{
library(tidycreel)
library(survey)

# Roving survey data (incomplete trips)
# hours_fished = observed so far, catch_kept = current

# Create survey design
svy_roving <- svydesign(
  ids = ~1,
  strata = ~location,
  data = roving_interviews
)

# Estimate CPUE with Pollock correction (requires total_trip_effort)
cpue_roving <- est_cpue_roving(
  design = svy_roving,
  by = c("location", "species"),
  response = "catch_kept",
  effort_col = "hours_fished",
  total_trip_effort_col = "planned_hours",  # Stated total trip duration
  length_bias_correction = "pollock",
  min_trip_hours = 0.5
)

# Without length-bias correction (assumes no bias or complete trips)
cpue_simple <- est_cpue_roving(
  design = svy_roving,
  by = "location",
  response = "catch_total",
  length_bias_correction = "none"
)
}

}
\references{
Pollock, K.H., C.M. Jones, and T.L. Brown. 1994. Angler Survey Methods
and Their Applications in Fisheries Management. American Fisheries
Society Special Publication 25. Bethesda, Maryland.

Hoenig, J.M., C.M. Jones, K.H. Pollock, D.S. Robson, and D.L. Wade. 1997.
Calculation of catch rate and total catch in roving and access point
surveys. Biometrics 53:306-317.
}
\seealso{
\code{\link[=est_cpue]{est_cpue()}}, \code{\link[=est_effort]{est_effort()}}, \code{\link[=aggregate_cpue]{aggregate_cpue()}}
}
