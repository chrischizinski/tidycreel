% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/est-effort-busroute.R
\name{est_effort.busroute_design}
\alias{est_effort.busroute_design}
\title{Bus-Route Effort Estimation (survey-first HT)}
\usage{
est_effort.busroute_design(
  x,
  counts = NULL,
  by = c("date", "location"),
  day_id = "date",
  inclusion_prob_col = "inclusion_prob",
  route_minutes_col = "route_minutes",
  contrib_hours_col = NULL,
  covariates = NULL,
  svy = NULL,
  conf_level = 0.95,
  ...
)
}
\arguments{
\item{x}{A \code{busroute_design} object.}

\item{counts}{Optional tibble/data.frame of observation data. If \code{x} contains
\verb{$counts}, that will be used by default.}

\item{by}{Character vector of grouping variables to retain in output (e.g.,
\code{date}, \code{location}). Missing columns are ignored with a warning.}

\item{day_id}{Day identifier (PSU), typically \code{date}.}

\item{inclusion_prob_col}{Column name with inclusion probability \code{pi} for each
observed party/vehicle or count segment (default \code{inclusion_prob}).}

\item{route_minutes_col}{Per-visit route minutes column to translate counts
to time (default \code{route_minutes}). Used if \code{contrib_hours_col} is not given.}

\item{contrib_hours_col}{Optional precomputed contribution in hours for each
observed unit (e.g., observed overlap hours). If present, the HT
contribution is \code{contrib_hours / pi}. Otherwise uses \code{count / pi * route_minutes/60}.}

\item{covariates}{Optional character vector of additional grouping variables.}

\item{svy}{Optional \code{svydesign}/\code{svrepdesign} encoding day-level sampling. If
absent, a day-PSU design is constructed from \code{x$calendar} via
\code{as_day_svydesign()}.}

\item{conf_level}{Confidence level for CI (default 0.95).}

\item{...}{Reserved for future arguments.}
}
\value{
A tibble with group columns, \code{estimate}, \code{se}, \code{ci_low}, \code{ci_high},
\code{n}, \code{method}, and a \code{diagnostics} list-column.
}
\description{
Estimate fishing effort for bus-route designs using a Horvitz–Thompson-style
day×group total and compute design-based totals and variance via the \code{survey}
package. Supports replicate-weight designs.
}
\details{
Computes day × group totals using Horvitz–Thompson contributions and uses
a day-PSU survey design to compute totals/variance via the \code{survey} package.
Replicate-weight designs are supported by passing a \code{svrepdesign}.
}
\examples{
\dontrun{
# Example: Create bus-route design and estimate effort
# design <- design_busroute(counts, schedule, calendar)
# est_effort(design, by = c("date", "location"))
}

}
\references{
Malvestuto, S.P. (1996). Sampling for creel survey data.
In: Murphy, B.R. & Willis, D.W. (eds) Fisheries Techniques,
2nd Edition. American Fisheries Society.
}
